{"filter":false,"title":"TweetController.php","tooltip":"/laratter/app/Http/Controllers/TweetController.php","undoManager":{"mark":25,"position":25,"stack":[[{"start":{"row":0,"column":0},"end":{"row":84,"column":0},"action":"remove","lines":["<?php","","namespace App\\Http\\Controllers;","","use Illuminate\\Http\\Request;","","class TweetController extends Controller","{","    /**","     * Display a listing of the resource.","     *","     * @return \\Illuminate\\Http\\Response","     */","    public function index()","    {","        //","    }","","    /**","     * Show the form for creating a new resource.","     *","     * @return \\Illuminate\\Http\\Response","     */","    public function create()","    {","        //","    }","","    /**","     * Store a newly created resource in storage.","     *","     * @param  \\Illuminate\\Http\\Request  $request","     * @return \\Illuminate\\Http\\Response","     */","    public function store(Request $request)","    {","        //","    }","","    /**","     * Display the specified resource.","     *","     * @param  int  $id","     * @return \\Illuminate\\Http\\Response","     */","    public function show($id)","    {","        //","    }","","    /**","     * Show the form for editing the specified resource.","     *","     * @param  int  $id","     * @return \\Illuminate\\Http\\Response","     */","    public function edit($id)","    {","        //","    }","","    /**","     * Update the specified resource in storage.","     *","     * @param  \\Illuminate\\Http\\Request  $request","     * @param  int  $id","     * @return \\Illuminate\\Http\\Response","     */","    public function update(Request $request, $id)","    {","        //","    }","","    /**","     * Remove the specified resource from storage.","     *","     * @param  int  $id","     * @return \\Illuminate\\Http\\Response","     */","    public function destroy($id)","    {","        //","    }","}",""],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":35,"column":1},"action":"insert","lines":["<?php","","namespace App\\Http\\Controllers;","","use Illuminate\\Http\\Request;","// 🔽 2行追加","use Validator;","use App\\Models\\Tweet;","","class TweetController extends Controller","{","  /**","   * Display a listing of the resource.","   *","   * @return \\Illuminate\\Http\\Response","   */","  public function index()","  {","    // 🔽 追加","    return response()->view('tweet.index');","  }","","  /**","   * Show the form for creating a new resource.","   *","   * @return \\Illuminate\\Http\\Response","   */","  public function create()","  {","    // 🔽 追加","    return response()->view('tweet.create');","  }","","  // 以降は変更なし","","}"],"id":3}],[{"start":{"row":18,"column":4},"end":{"row":19,"column":43},"action":"remove","lines":["// 🔽 追加","    return response()->view('tweet.index');"],"id":4},{"start":{"row":18,"column":4},"end":{"row":20,"column":59},"action":"insert","lines":["// 🔽 編集","  $tweets = [];","  return response()->view('tweet.index',compact('tweets'));"]}],[{"start":{"row":34,"column":11},"end":{"row":34,"column":12},"action":"remove","lines":["し"],"id":10},{"start":{"row":34,"column":11},"end":{"row":35,"column":0},"action":"insert","lines":["",""]},{"start":{"row":35,"column":0},"end":{"row":35,"column":2},"action":"insert","lines":["  "]},{"start":{"row":35,"column":2},"end":{"row":36,"column":0},"action":"insert","lines":["",""]},{"start":{"row":36,"column":0},"end":{"row":36,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":36,"column":2},"end":{"row":55,"column":1},"action":"insert","lines":["public function store(Request $request)","{","  // バリデーション","  $validator = Validator::make($request->all(), [","    'tweet' => 'required | max:191',","    'description' => 'required',","  ]);","  // バリデーション:エラー","  if ($validator->fails()) {","    return redirect()","      ->route('tweet.create')","      ->withInput()","      ->withErrors($validator);","  }","  // create()は最初から用意されている関数","  // 戻り値は挿入されたレコードの情報","  $result = Tweet::create($request->all());","  // ルーティング「tweet.index」にリクエスト送信（一覧ページに移動）","  return redirect()->route('tweet.index');","}"],"id":11}],[{"start":{"row":19,"column":14},"end":{"row":19,"column":15},"action":"remove","lines":[";"],"id":12},{"start":{"row":19,"column":13},"end":{"row":19,"column":14},"action":"remove","lines":["]"]},{"start":{"row":19,"column":12},"end":{"row":19,"column":13},"action":"remove","lines":["["]},{"start":{"row":19,"column":11},"end":{"row":19,"column":12},"action":"remove","lines":[" "]}],[{"start":{"row":19,"column":11},"end":{"row":19,"column":12},"action":"insert","lines":[" "],"id":13}],[{"start":{"row":19,"column":12},"end":{"row":19,"column":45},"action":"insert","lines":["Tweet::getAllOrderByUpdated_at();"],"id":14}],[{"start":{"row":20,"column":2},"end":{"row":20,"column":59},"action":"remove","lines":["return response()->view('tweet.index',compact('tweets'));"],"id":15},{"start":{"row":20,"column":2},"end":{"row":20,"column":59},"action":"insert","lines":["return response()->view('tweet.index',compact('tweets'));"]}],[{"start":{"row":56,"column":0},"end":{"row":57,"column":0},"action":"insert","lines":["",""],"id":16}],[{"start":{"row":57,"column":0},"end":{"row":61,"column":1},"action":"insert","lines":["public function show($id)","{","  $tweet = Tweet::find($id);","  return response()->view('tweet.show', compact('tweet'));","}"],"id":17}],[{"start":{"row":61,"column":1},"end":{"row":62,"column":0},"action":"insert","lines":["",""],"id":18},{"start":{"row":62,"column":0},"end":{"row":63,"column":0},"action":"insert","lines":["",""]},{"start":{"row":63,"column":0},"end":{"row":64,"column":0},"action":"insert","lines":["",""]},{"start":{"row":64,"column":0},"end":{"row":65,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":63,"column":0},"end":{"row":68,"column":0},"action":"insert","lines":["public function destroy($id)","{","  $result = Tweet::find($id)->delete();","  return redirect()->route('tweet.index');","}",""],"id":19}],[{"start":{"row":68,"column":0},"end":{"row":69,"column":0},"action":"insert","lines":["",""],"id":20}],[{"start":{"row":69,"column":0},"end":{"row":73,"column":1},"action":"insert","lines":["public function edit($id)","{","  $tweet = Tweet::find($id);","  return view('tweet.edit', compact('tweet'));","}"],"id":21}],[{"start":{"row":75,"column":0},"end":{"row":76,"column":0},"action":"insert","lines":["",""],"id":22},{"start":{"row":76,"column":0},"end":{"row":77,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":75,"column":0},"end":{"row":93,"column":0},"action":"insert","lines":["public function update(Request $request, $id)","{","  //バリデーション","  $validator = Validator::make($request->all(), [","    'tweet' => 'required | max:191',","    'description' => 'required',","  ]);","  //バリデーション:エラー","  if ($validator->fails()) {","    return redirect()","      ->route('tweet.edit', $id)","      ->withInput()","      ->withErrors($validator);","  }","  //データ更新処理","  $result = Tweet::find($id)->update($request->all());","  return redirect()->route('tweet.index');","}",""],"id":23}],[{"start":{"row":5,"column":9},"end":{"row":5,"column":10},"action":"remove","lines":["加"],"id":24},{"start":{"row":5,"column":8},"end":{"row":5,"column":9},"action":"remove","lines":["追"]},{"start":{"row":5,"column":7},"end":{"row":5,"column":8},"action":"remove","lines":["行"]},{"start":{"row":5,"column":6},"end":{"row":5,"column":7},"action":"remove","lines":["2"]},{"start":{"row":5,"column":5},"end":{"row":5,"column":6},"action":"remove","lines":[" "]},{"start":{"row":5,"column":3},"end":{"row":5,"column":5},"action":"remove","lines":["🔽"]},{"start":{"row":5,"column":2},"end":{"row":5,"column":3},"action":"remove","lines":[" "]},{"start":{"row":5,"column":1},"end":{"row":5,"column":2},"action":"remove","lines":["/"]},{"start":{"row":5,"column":0},"end":{"row":5,"column":1},"action":"remove","lines":["/"]}],[{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""],"id":25},{"start":{"row":9,"column":0},"end":{"row":10,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":9,"column":0},"end":{"row":12,"column":1},"action":"remove","lines":["","","class TweetController extends Controller","{"],"id":26},{"start":{"row":9,"column":0},"end":{"row":12,"column":1},"action":"insert","lines":["use Auth;","","class TweetController extends Controller","{"]}],[{"start":{"row":54,"column":43},"end":{"row":55,"column":0},"action":"insert","lines":["",""],"id":27},{"start":{"row":55,"column":0},"end":{"row":55,"column":2},"action":"insert","lines":["  "]},{"start":{"row":55,"column":2},"end":{"row":56,"column":0},"action":"insert","lines":["",""]},{"start":{"row":56,"column":0},"end":{"row":56,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":56,"column":2},"end":{"row":57,"column":0},"action":"insert","lines":["",""],"id":28},{"start":{"row":57,"column":0},"end":{"row":57,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":56,"column":2},"end":{"row":57,"column":35},"action":"insert","lines":["$data = $request->merge(['user_id' => Auth::user()->id])->all();","    $result = Tweet::create($data);"],"id":29}],[{"start":{"row":57,"column":2},"end":{"row":57,"column":4},"action":"remove","lines":["  "],"id":30}],[{"start":{"row":100,"column":0},"end":{"row":109,"column":3},"action":"insert","lines":["public function mydata()","  {","    // Userモデルに定義したリレーションを使用してデータを取得する．","    $tweets = User::query()","      ->find(Auth::user()->id)","      ->userTweets()","      ->orderBy('created_at','desc')","      ->get();","    return response()->view('tweet.index', compact('tweets'));","  }"],"id":31}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":20},"action":"insert","lines":["use App\\Models\\User;"],"id":32}]]},"ace":{"folds":[],"scrolltop":52.20000000000004,"scrollleft":0,"selection":{"start":{"row":10,"column":20},"end":{"row":10,"column":20},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":76,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1676100911123,"hash":"68373e4a516a5e5b0311b54548d1fa2af57baf63"}